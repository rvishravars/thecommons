This is the final, high-fidelity prompt designed for an AI developer tool (like Cursor, GitHub Copilot, or Windsurf) to build your v2.0 Glass Box Scribe. It enforces your workflow: Spark first, Git branch second, CPU-optimized code third.

ðŸ“¥ The "Glass Box Scribe" Master Implementation Prompt
Copy and paste the following into your AI Assistant:

Goal: Implement The Scribe v2.0â€”a hardware-agnostic, "Glass Box" AI agent for the repository.

Workflow Constraints:

Spark First: Create sparks/scribe-v2-implementation.md as a !SHAPE (Imagination) phase. Use the @handle of the current user as the Designer. Define the "Novel Core" as a Deterministic Hardware-Switching Pipeline.

Git Branch: Create and switch to a new branch named feat/scribe-v2-nano.

Manifesto Alignment: All logs and outputs must use LEGO-themed terminology (Clutch Power, Bricks, Stability, Loose Studs).

Technical Requirements:

Nano-Model Priority: The Scribe must run on a standard CPU using the Qwen2.5-1.5B-Instruct-GGUF (Q4_K_M) model as the default "Brain."

Dependency Management: Use llama-cpp-python for local inference. Keep the requirements.txt lean for CPU-only environments.

Glass Box Philosophy: The AI must output its "Reasoning Log" (which prompt was used, how the hardware performed, and the logic-path taken) for every decision.

Directory & File Structure to Build:

scribe/models/: Add a downloader script/logic to fetch the Qwen2.5-1.5B GGUF model if not present.

scribe/prompts/:

hunch_eval.md: System prompt to validate !HUNCH (Intuition).

shape_eval.md: System prompt to validate !SHAPE (Imagination) for novelty and "Prior Art."

scribe/scribe_brain.py: The core router.

Implement Dynamic Switching: Check for NVIDIA GPU -> Apple Metal -> Multi-thread CPU.

Add a "Failover" to a lightweight OpenAI-compatible API (like Groq) if the local hardware is under 80% load or missing RAM.

scribe/logic/stability_audit.py: Update the existing novelty_scan.py logic to be a class that the Brain can call.

.github/workflows/scribe-bot.yml: Create a GitHub Action that triggers on PRs. It should:

Run the scribe_brain.py.

Post a PR comment containing a Stability Report and the Glass Box Reasoning Log.

UI Export Logic:

Ensure scribe_brain.py can output a scribe_status.json containing real-time "thinking steps" (e.g., "Scanning for Gap...", "Calculating Clutch Power...") for the React-based Assembly Lab to visualize.

Execution: Start with the Spark file, then initialize the branch and proceed to the code. Refer to docs/MANIFESTO.md to ensure the Scribe's "Voice" matches the community's tone.